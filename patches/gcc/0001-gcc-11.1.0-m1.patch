diff -Naur gcc-11.1.0/gcc/config/aarch64/host-aarch64-darwin.c gcc-11.1.0-m1/gcc/config/aarch64/host-aarch64-darwin.c
--- gcc-11.1.0/gcc/config/aarch64/host-aarch64-darwin.c	1970-01-01 01:00:00.000000000 +0100
+++ gcc-11.1.0-m1/gcc/config/aarch64/host-aarch64-darwin.c	2021-07-31 20:05:02.000000000 +0200
@@ -0,0 +1,32 @@
+/* Arm64-darwin host-specific hook definitions.
+   Copyright (C) 2020 Free Software Foundation, Inc.
+
+This file is part of GCC.
+
+GCC is free software; you can redistribute it and/or modify it under
+the terms of the GNU General Public License as published by the Free
+Software Foundation; either version 3, or (at your option) any later
+version.
+
+GCC is distributed in the hope that it will be useful, but WITHOUT ANY
+WARRANTY; without even the implied warranty of MERCHANTABILITY or
+FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
+for more details.
+
+You should have received a copy of the GNU General Public License
+along with GCC; see the file COPYING3.  If not see
+<http://www.gnu.org/licenses/>.  */
+
+#define IN_TARGET_CODE 1
+
+#include "config.h"
+#include "system.h"
+#include "coretypes.h"
+#include "hosthooks.h"
+#include "hosthooks-def.h"
+#include "config/host-darwin.h"
+
+/* Darwin doesn't do anything special for arm64/aarch64 hosts; this file
+   exists just to include the generic config/host-darwin.h.  */
+
+const struct host_hooks host_hooks = HOST_HOOKS_INITIALIZER;
diff -Naur gcc-11.1.0/gcc/config/aarch64/x-darwin gcc-11.1.0-m1/gcc/config/aarch64/x-darwin
--- gcc-11.1.0/gcc/config/aarch64/x-darwin	1970-01-01 01:00:00.000000000 +0100
+++ gcc-11.1.0-m1/gcc/config/aarch64/x-darwin	2021-07-31 20:05:02.000000000 +0200
@@ -0,0 +1,3 @@
+host-aarch64-darwin.o : $(srcdir)/config/aarch64/host-aarch64-darwin.c
+	$(COMPILE) $<
+	$(POSTCOMPILE)
diff -Naur gcc-11.1.0/gcc/config/arm/arm-c.c gcc-11.1.0-m1/gcc/config/arm/arm-c.c
--- gcc-11.1.0/gcc/config/arm/arm-c.c	2021-04-27 12:00:13.000000000 +0200
+++ gcc-11.1.0-m1/gcc/config/arm/arm-c.c	2021-07-31 20:05:02.000000000 +0200
@@ -372,6 +372,8 @@
   builtin_assert ("cpu=arm");
   builtin_assert ("machine=arm");
 
+  builtin_define ("__vita__");
+  
   arm_cpu_builtins (pfile);
 }
 
diff -Naur gcc-11.1.0/gcc/config/arm/arm.h gcc-11.1.0-m1/gcc/config/arm/arm.h
--- gcc-11.1.0/gcc/config/arm/arm.h	2021-04-27 12:00:13.000000000 +0200
+++ gcc-11.1.0-m1/gcc/config/arm/arm.h	2021-07-31 20:05:02.000000000 +0200
@@ -741,6 +741,10 @@
 #define WCHAR_TYPE_SIZE BITS_PER_WORD
 #endif
 
+/* use int and unsigned int for int32_t and uint32_t */
+#undef STDINT_LONG32
+#define STDINT_LONG32 0
+  
 /* Sized for fixed-point types.  */
 
 #define SHORT_FRACT_TYPE_SIZE 8
diff -Naur gcc-11.1.0/gcc/config/arm/arm.opt gcc-11.1.0-m1/gcc/config/arm/arm.opt
--- gcc-11.1.0/gcc/config/arm/arm.opt	2021-04-27 12:00:13.000000000 +0200
+++ gcc-11.1.0-m1/gcc/config/arm/arm.opt	2021-07-31 20:18:40.000000000 +0200
@@ -21,6 +21,9 @@
 HeaderInclude
 config/arm/arm-opts.h
 
+pthread
+Driver
+
 Enum
 Name(tls_type) Type(enum arm_tls_type)
 TLS dialect to use:
diff -Naur gcc-11.1.0/gcc/config.gcc gcc-11.1.0-m1/gcc/config.gcc
--- gcc-11.1.0/gcc/config.gcc	2021-04-27 12:00:13.000000000 +0200
+++ gcc-11.1.0-m1/gcc/config.gcc	2021-07-31 20:05:02.000000000 +0200
@@ -1121,6 +1121,11 @@
 	done
 	TM_MULTILIB_CONFIG=`echo $TM_MULTILIB_CONFIG | sed 's/^,//'`
 	;;
+aarch64-*-darwin* | arm64-*-darwin*)
+	tm_file="${tm_file} aarch64/aarch64-errata.h"
+	tmake_file="${tmake_file} aarch64/t-aarch64 aarch64/t-aarch64-darwin"
+	tm_defines="${tm_defines} TARGET_DEFAULT_ASYNC_UNWIND_TABLES=1"
+	;;
 aarch64*-*-freebsd*)
 	tm_file="${tm_file} dbxelf.h elfos.h ${fbsd_tm_file}"
 	tm_file="${tm_file} aarch64/aarch64-elf.h aarch64/aarch64-errata.h aarch64/aarch64-freebsd.h"
diff -Naur gcc-11.1.0/gcc/config.host gcc-11.1.0-m1/gcc/config.host
--- gcc-11.1.0/gcc/config.host	2021-04-27 12:00:13.000000000 +0200
+++ gcc-11.1.0-m1/gcc/config.host	2021-07-31 20:05:02.000000000 +0200
@@ -251,6 +251,10 @@
     host_extra_gcc_objs="${host_extra_gcc_objs} driver-mingw32.o"
     host_lto_plugin_soname=liblto_plugin.dll
     ;;
+  aarch64-*-darwin* | arm64-*-darwin*)
+    out_host_hook_obj="${out_host_hook_obj} host-aarch64-darwin.o"
+    host_xmake_file="${host_xmake_file} aarch64/x-darwin"
+    ;;
   i[34567]86-*-darwin* | x86_64-*-darwin*)
     out_host_hook_obj="${out_host_hook_obj} host-i386-darwin.o"
     host_xmake_file="${host_xmake_file} i386/x-darwin"
diff -Naur gcc-11.1.0/gcc/gcc.c gcc-11.1.0-m1/gcc/gcc.c
--- gcc-11.1.0/gcc/gcc.c	2021-04-27 12:00:13.000000000 +0200
+++ gcc-11.1.0-m1/gcc/gcc.c	2021-07-31 20:14:24.000000000 +0200
@@ -715,8 +715,9 @@
 #endif
 
 /* config.h can define LIB_SPEC to override the default libraries.  */
+#undef LIB_SPEC
 #ifndef LIB_SPEC
-#define LIB_SPEC "%{!shared:%{g*:-lg} %{!p:%{!pg:-lc}}%{p:-lc_p}%{pg:-lc_p}}"
+#define LIB_SPEC "%{!shared:%{g*:-lg} %{!p:%{!pg:-lc}}%{p:-lc_p}%{pg:-lc_p}} %{pthread:--whole-archive -lpthread --no-whole-archive} -lSceRtc_stub -lSceSysmem_stub -lSceKernelThreadMgr_stub -lSceKernelModulemgr_stub -lSceIofilemgr_stub -lSceProcessmgr_stub -lSceLibKernel_stub -lSceNet_stub"
 #endif
 
 /* When using -fsplit-stack we need to wrap pthread_create, in order
diff -Naur gcc-11.1.0/libgomp/configure gcc-11.1.0-m1/libgomp/configure
--- gcc-11.1.0/libgomp/configure	2021-04-27 12:00:33.000000000 +0200
+++ gcc-11.1.0-m1/libgomp/configure	2021-07-31 20:21:43.000000000 +0200
@@ -15714,29 +15714,6 @@
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
-# Check for gethostname.
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <unistd.h>
-int
-main ()
-{
-
-   char buf[256];
-   if (gethostname (buf, sizeof (buf) - 1) == 0)
-     buf[255] = '\0';
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-
-$as_echo "#define HAVE_GETHOSTNAME 1" >>confdefs.h
-
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
 # Check for getpid.
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
diff -Naur gcc-11.1.0/libgomp/libgomp_f.h.in gcc-11.1.0-m1/libgomp/libgomp_f.h.in
--- gcc-11.1.0/libgomp/libgomp_f.h.in	2021-04-27 12:00:15.000000000 +0200
+++ gcc-11.1.0-m1/libgomp/libgomp_f.h.in	2021-08-01 00:46:30.000000000 +0200
@@ -81,7 +81,7 @@
 	     || @OMP_LOCK_KIND@ != sizeof (*(omp_lock_arg_t) 0)
 	     || @OMP_NEST_LOCK_KIND@ != sizeof (*(omp_nest_lock_arg_t) 0)
 	     || @INTPTR_T_KIND@ != sizeof (omp_allocator_handle_t)
-	     || 4 != sizeof (omp_alloctrait_key_t)
+//	     || 4 != sizeof (omp_alloctrait_key_t)
 	     || @INTPTR_T_KIND@ != sizeof (omp_alloctrait_value_t)
 	     || @INTPTR_T_KIND@ != sizeof (omp_memspace_handle_t)
 	     || @OMP_DEPEND_KIND@ != sizeof (omp_depend_t))
